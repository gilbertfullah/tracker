div{% extends "_base.html" %}

{% block content %}

    <style>
        /* Container styles */

        * {
          margin: 0;
          padding: 0;
          font-family: sans-serif;
        }
        .chartMenu {
          width: 100vw;
          height: 40px;
          background: #1A1A1A;
          color: rgba(54, 162, 235, 1);
        }
        .chartMenu p {
          padding: 10px;
          font-size: 20px;
        }
        .chartCard {
          width: 100vw;
          height: calc(80vh - 40px);
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .chartBox {
          width: 550px;
          padding: 20px;
          border-radius: 20px;
          border: solid 3px rgba(54, 162, 235, 1);
          background: white;
        }
        
        .indicator-title {
            background-color: black;
            color: white;
            padding: 20px;
        }

        .indicator {
            border: 2px dashed black;
        }

        .tooltip {
          position: relative;
          display: inline-block;
        }
        
        .tooltip .tooltiptext {
          visibility: hidden;
          width: 120px;
          background-color: #333;
          color: #fff;
          text-align: center;
          border-radius: 6px;
          padding: 5px;
          position: absolute;
          z-index: 1;
          bottom: 125%;
          left: 50%;
          margin-left: -60px;
          opacity: 0;
          transition: opacity 0.3s;
        }
        
        .tooltip:hover .tooltiptext {
          visibility: visible;
          opacity: 1;
        }
        
    </style>

    <script src="https://unpkg.com/htmx.org@1.7.0/dist/htmx.js"></script>

    <!-- Parent container with padding -->
    <div class="container mx-auto p-6">
          
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js@3.6.0/dist/chart.min.js"></script>
      
      </div>

        <!-- Grid container for the row -->
        <div class="grid grid-cols-12 gap-4">

            <!-- First part of the container with cards in rows -->
            <div class="col-span-12 md:col-span-12 lg:col-span-12 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-4">

                    <div class="col-span-12 md:col-span-12 lg:col-span-12 grid-cols-1 md:grid-cols-1 lg:grid-cols-1 mt-4 md:mt-8 lg:mt-8">
                      <div class="indicator">
                        <h2 class="indicator-title text-center text-2xl">Outcomes for BASE</h2>

                        <div class="grid gap-2 md:grid-cols-2 lg:gap-12 mt-6">

                          <!-- First Chart -->
                          <div class="mb-12 md:mb-0 ml-6">
                            <div class="mb-6">
                              <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Trust in local authorities</h5>
                              <div class="chartBox">
                                <canvas id="trustChart"></canvas>
                                <!-- Legend -->
                                <div class="legend-container mt-8 text-center flex">
                                  <p class="legend-item flex-1 text-center text-white p-4 pt-6" style="background-color: #FF0000"><=40%</p>
                                  <p class="legend-item flex-2 text-center text-white p-4 pt-6" style="background-color: #FFA500">>40% - <=60%</p>
                                  <p class="legend-item flex-1 text-center text-white p-4 pt-6" style="background-color: #008000">>60%</p>
                                </div>
                                <p class="legend-item flex-1 text-end text-black mt-4">Source: Afrobarometer(2022)</p>
                              </div>
                            </div>
                          </div>
                  
                          <!-- Second Chart -->
                          <div class="mb-12 md:mb-0">
                              <div class="mb-6">
                                      <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Maternal Mortality</h5>
                                      <div class="chartBox">
                                        <p class="text-xl font-semibold mb-4 text-center">% change in maternal mortality from 2021-2022</p>
                                        <div id="seray"></div>
                                        <p class="legend-item flex-1 text-end text-black mt-4">Source: Ministry of Health(2022)</p>
                                      </div>

                                      <script>
                                        var options = {
                                          series: [{
                                          name: 'Cash Flow',
                                          data: [117, -97, -63, -47, -95, -46, -68]
                                        }],
                                          chart: {
                                          type: 'bar',
                                          height: 350
                                        },
                                        plotOptions: {
                                          bar: {
                                            colors: {
                                              ranges: [{
                                                from: -6,
                                                to: -100,
                                                color: '#FF0000'
                                              }, {
                                                from: -5,
                                                to: 500,
                                                color: '#FF4560'
                                              }]
                                            },
                                            columnWidth: '80%',
                                          }
                                        },
                                        dataLabels: {
                                          enabled: true,
                                          formatter: function (val) {
                                            return val.toFixed(0) + "%";
                                          },
                                          style: {
                                            colors: ['#000000']  // Change this to the desired color for data labels
                                          }
                                        },
                                        yaxis: {
                                          title: {
                                            text: '',
                                          },
                                          labels: {
                                            formatter: function (y) {
                                              return y.toFixed(0) + "%";
                                            }
                                          }
                                        },
                                        xaxis: {
                                          categories: ["Falaba", "Karene", "Kono", "Moyamba", "Tonkolili", "Western Area Rural", "National Average"],
                                          labels: {
                                            rotate: -90
                                          }
                                        }
                                        };
                                  
                                        var maternalchart = new ApexCharts(document.querySelector("#seray"), options);
                                        maternalchart.render();
                                      </script>

                              </div>

                              
                          
                          </div>
                  
                        </div>

                        <div class="grid gap-2 md:grid-cols-2 lg:gap-12 mt-6">
                          <!-- First Chart -->
                          <div class="mb-12 md:mb-0 ml-6">
                              <div class="mb-6">
                                <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Mortality of under five children</h5>
                                <div class="chartBox">
                                  <div id="newChart"></div>
                                  <p class="legend-item flex-1 text-end text-black mt-4">Source: Ministry of Health(2022)</p>
                                </div>    
                              </div>
                          </div>
                  
                          <!-- Second Chart -->
                          <div class="mb-12 md:mb-0">
                              <div class="mb-6">
                                <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Learning Outcomes</h5>
                                <div class="chartBox">
                                  <canvas id="npseChart"></canvas>
                                  <p class="legend-item flex-1 text-end text-black mt-4">Source: Ministry of Education(2023)</p>
                                </div>
                              </div>
                          </div>
                  
                        </div>

                        <div class="grid gap-2 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 lg:gap-12 mt-6">
                          <div class="mb-12 md:mb-0 ml-6">
                              <div class="mb-6">
                                <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Community Stability</h5>
                                <div class="chartBox">
                                  <div class="container mx-auto flex flex-wrap justify-center">
                                    <p class="text-xl font-semibold mb-4">% of community members who feel safe</p>
                                    <!-- Data Loop -->
                                    {% for data in div_data %}
                                    <div class="w-full md:w-1/2 lg:w-1/3 p-4">
                                      <div class="p-6 rounded-lg shadow-lg {{ data.color_class }}">
                                        <!-- District Name -->
                                        <p class="text-white text-center">{{ data.district|safe }}</p>
                                        
                                        <!-- Percentage with Tooltip -->
                                        <p class="text-white text-center relative tooltip pl-6">
                                          {{ data.percentage }}%
                                          <span class="tooltiptext">{{ data.color_description }}</span>
                                        </p>
                                      </div>
                                    </div>
                                  {% endfor %}

                                    <!-- Third Row (Bottom Div) -->
                                    <div class="w-full p-4">
                                      <div class="bg-yellow-500 p-6 rounded-lg shadow-lg">
                                        <p class="text-white text-center">Average of 6 Districts: 69%</p>
                                      </div>
                                    </div>

                                    <!-- Legend -->
                                    <div class="legend-container mt-8 text-center flex">
                                      <p class="legend-item bg-red-500 flex-1 text-center text-white p-4 pt-8"><60%</p>
                                      <p class="legend-item bg-yellow-500 flex-2 text-center text-white p-4 pt-8">>60% - <70%</p>
                                      <p class="legend-item bg-green-500 flex-1 text-center text-white p-4 pt-8">>70%</p>
                                    </div>
                                    
                                  </div>
                                  <p class="legend-item flex-1 text-end text-black mt-4">Source: IGR(2023)</p>
                                </div>
                              </div>
                          </div>

                          <div class="mb-12 md:mb-0 ml-6">
                            <div class="mb-6">
                              <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Local (own-source) revenue​</h5>
                              <div class="chartBox">
                                <div class="container mx-auto flex flex-wrap justify-center">
                                  <p class="text-xl font-semibold mb-4 text-center">% change in own-source revenue by District Councils between 2020-2022</p>
                                  <div id="ownSource"></div>

                                  <script>
                                    var options = {
                                      series: [{
                                      name: 'Cash Flow',
                                      data: [-11, -13, -30, -44, 101, 33]
                                    }],
                                      chart: {
                                      type: 'bar',
                                      height: 350
                                    },
                                    plotOptions: {
                                      bar: {
                                        colors: {
                                          ranges: [{
                                            from: -6,
                                            to: -100,
                                            color: '#FF0000'
                                          }, {
                                            from: -5,
                                            to: 500,
                                            color: '#FF4560'
                                          }]
                                        },
                                        columnWidth: '80%',
                                      }
                                    },
                                    dataLabels: {
                                      enabled: true,
                                      formatter: function (val) {
                                        return val.toFixed(0) + "%";
                                      },
                                      style: {
                                        colors: ['#000000']  // Change this to the desired color for data labels
                                      }
                                    },
                                    yaxis: {
                                      title: {
                                        text: '',
                                      },
                                      labels: {
                                        formatter: function (y) {
                                          return y.toFixed(0) + "%";
                                        }
                                      }
                                    },
                                    xaxis: {
                                      categories: ["Falaba", "Karene", "Kono", "Moyamba", "Tonkolili", "Western Area Rural"],
                                      labels: {
                                        rotate: -90
                                      }
                                    }
                                    };
                              
                                    var agafchart = new ApexCharts(document.querySelector("#ownSource"), options);
                                    agafchart.render();
                                  </script>

                                  <!-- Third Row (Bottom Div) -->
                                  <div class="w-full p-4">
                                    <div class="bg-yellow-500 p-6 rounded-lg shadow-lg">
                                      <p class="text-white text-center">Average of 6 Districts: 6%</p>
                                    </div>
                                  </div>
                                  
                                </div>
                                <p class="legend-item flex-1 text-end text-black mt-4">Source: IGR(2023)</p>
                              </div>

                            </div>
                        </div>
                  
                        </div>

                      </div>
                    </div>

                    <div class="col-span-12 md:col-span-12 lg:col-span-12 grid-cols-1 md:grid-cols-1 lg:grid-cols-1 mt-4 md:mt-8 lg:mt-8">
                      <div class="indicator">
                        <h2 class="indicator-title text-center text-2xl">Central level – IMC, FDD, Line Ministries, MLGRD</h2>

                        <div class="grid gap-2 md:grid-cols-2 lg:gap-12 mt-6">

                          <!-- First Chart -->
                          <div class="mb-12 md:mb-0 ml-6">
                            <div class="mb-6">
                              <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Budget allocation to devolved functions</h5>
                              <div class="chartBox">
                                <div id="budgetDevolvedChart"></div>

                                <p class="legend-item flex-1 text-end text-black mt-4">Source: Ministry of Finance</p>
                              </div>
                            </div>
                          </div>
                  
                          <!-- Second Chart -->
                          <div class="mb-12 md:mb-0">
                              <div class="mb-6">
                                      <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Timeliness of transfers​ to Local Councils</h5>
                                      <div class="chartBox">
                                        <canvas id="transferChart"></canvas>
                                      </div>
                              </div>

                              
                          
                          </div>
                  
                        </div>



                      </div>
                    </div>


                    <div class="col-span-12 md:col-span-12 lg:col-span-12 grid-cols-1 md:grid-cols-1 lg:grid-cols-1 mt-4 md:mt-3 lg:mt-3">

                      <div class="indicator">
                        <h2 class="indicator-title text-center text-2xl">Intermediate – LOCAL COUNCILS, DEVOLVED AGENCIES, NGOS, PRIVATE PROVIDERS</h2>

                        <div class="grid gap-2 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 lg:gap-12 mt-6">

                          <div class="mb-12 md:mb-0 ml-6">
                            <div class="mb-6">
                              <h5 class="text-3xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Bribery for state and local council provided services</h5>
                              <div class="flex chartBox flex-wrap">
                                <h2 class="w-full text-center text-2xl font-semibold mb-6">% of citizens who paid bribe to get the service</h2>
                                <!-- Column 1 -->
                                <div class="flex-initial m-4 p-6 bg-white rounded-lg shadow-md">
                                  <h5 class="text-xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Services</h5>
                                  {% for service in services %}
                                  <div class="mb-4 pb-4 border-b border-gray-300 text-center">{{service}}</div>
                                  {% endfor %}
                                </div>
                              
                                <!-- Column 2 -->
                                <div class="flex-initial m-4 p-6 bg-white rounded-lg shadow-md">
                                  <h5 class="text-xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">2023</h5>
                                  {% for data in bribery_data %}
                                  <div class="mb-4 pb-4 border-b border-gray-300">{{data.percentage}}%</div>
                                  {% endfor %}
                                </div>
                              
                                <!-- Column 3 -->
                                <div class="flex-initial m-4 p-6 bg-white rounded-lg shadow-md">
                                  <h5 class="text-xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Status</h5>
                                  {% for data in bribery_data %}
                                  <div class="mb-4 p-6 pb-4 border-b border-gray-300 {{ data.color_class }}"></div>
                                  {% endfor %}
                                </div>
                              
                                <!-- New Row for Legend -->
                                <div class="w-full mt-8 text-center">
                                  <p class="legend-item bg-red-500 inline-block text-center text-white p-4">High (>50%)</p>
                                  <p class="legend-item bg-yellow-500 inline-block text-center text-white p-4">Medium (>30% <50%)</p>
                                  <p class="legend-item bg-green-500 inline-block text-center text-white p-4">Low (<30%)</p>
                                </div>
                                <p class="legend-item flex-1 text-end text-black mt-4">Source: Afrobarometer(2022)</p>
                              </div>
                              
                            </div>
                          </div>

                          <div class="mb-12 md:mb-0 ml-6">
                            <div class="mb-6">
                              <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Audit recommendations implemented by Local Councils</h5>
                              <div class="chartBox">
                                <div class="container mx-auto flex flex-wrap justify-center">
                                  <p class="text-xl font-semibold mb-4">% of audit recommendations implemented by LC</p>
                                  <!-- Data Loop -->
                                  {% for data in audit_data %}
                                  <div class="w-full md:w-1/2 lg:w-1/3 p-4">
                                    <div class="p-6 rounded-lg shadow-lg {{ data.color_class }}">
                                      <!-- District Name -->
                                      <p class="text-white text-center">{{ data.district|safe }}</p>
                                      
                                      <!-- Percentage with Tooltip -->
                                      <p class="text-white text-center relative tooltip pl-6">
                                        {{ data.percentage }}%
                                        <span class="tooltiptext">{{ data.color_description }}</span>
                                      </p>
                                    </div>
                                  </div>
                                {% endfor %}

                                  <!-- Third Row (Bottom Div) -->
                                  <div class="w-full p-4">
                                    <div class="bg-red-500 p-6 rounded-lg shadow-lg">
                                      <p class="text-white text-center">Average of 6 Districts: 35%</p>
                                    </div>
                                  </div>

                                  <!-- Legend -->
                                  <div class="legend-container mt-8 text-center flex">
                                    <p class="legend-item bg-red-500 flex-1 text-center text-white p-4 pt-8">Low (>45%)</p>
                                    <p class="legend-item bg-yellow-500 flex-2 text-center text-white p-4 pt-8">Medium (=>45 - >60%)</p>
                                    <p class="legend-item bg-green-500 flex-1 text-center text-white p-4">High (>60%)</p>
                                  </div>
                                  <p class="legend-item flex-1 text-end text-black mt-4">Source: Audit Tracker(2022)</p>
                                </div>
                              </div>


                              
                            </div>
                          </div>
                        
                        </div>

                        <div class="grid gap-2 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 lg:gap-12 mt-6">

                          <div class="mb-12 md:mb-0 ml-6">
                            <div class="mb-6">
                              <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">% of people who believe local revenue is not misused</h5>
                              <div class="chartBox">
                                <div class="container mx-auto flex flex-wrap justify-center">
                                  <p class="text-xl font-semibold mb-4 text-center">Funds that people assume are unlikely to be misused</p>
                                  <!-- Data Loop -->
                                  {% for data in misuse_data %}
                                  <div class="w-full md:w-1/2 lg:w-1/3 p-4">
                                    <div class="p-6 rounded-lg shadow-lg {{ data.color_class }}">
                                      <!-- District Name -->
                                      <p class="text-white text-center">{{ data.district|safe }}</p>
                                      
                                      <!-- Percentage with Tooltip -->
                                      <p class="text-white text-center relative tooltip pl-6">
                                        {{ data.percentage }}%
                                        <span class="tooltiptext">{{ data.color_description }}</span>
                                      </p>
                                    </div>
                                  </div>
                                {% endfor %}

                                  <!-- Third Row (Bottom Div) -->
                                  <div class="w-full p-4">
                                    <div class="bg-red-500 p-6 rounded-lg shadow-lg">
                                      <p class="text-white text-center">Average of 6 Districts: 18%</p>
                                    </div>
                                  </div>

                                  <!-- Legend -->
                                  <div class="legend-container mt-8 text-center flex">
                                    <p class="legend-item bg-red-500 flex-1 text-center text-white p-4 pt-8">High Misuse</p>
                                    <p class="legend-item bg-yellow-500 flex-2 text-center text-white p-4 pt-8">Medium Misuse</p>
                                    <p class="legend-item bg-green-500 flex-1 text-center text-white p-4">Low Misuse</p>
                                  </div>
                                  
                                </div>
                                <p class="legend-item flex-1 text-end text-black mt-4">Source: Baseline(2023)</p>
                              </div>
                            </div>
                          </div>
                        
                        </div>
                        
                      </div>
                    </div>


                    <div class="col-span-12 md:col-span-12 lg:col-span-12 grid-cols-1 md:grid-cols-1 lg:grid-cols-1 mt-4 md:mt-3 lg:mt-3">

                      <div class="indicator">
                        <h2 class="indicator-title text-center text-2xl">Lower/Community - Citizens, SMCs, FMCs, WDCs, Service users and frontline providers</h2>

                        <div class="grid gap-2 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 lg:gap-12 mt-6">


                          <div class="mb-12 md:mb-0 ml-6">
                            <div class="mb-6">
                              <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Satisfaction with agricultural services (seeds, trainings, machines, fertilisers, processing facilities and loans)</h5>
                              <div class="chartBox">
                                <div class="container mx-auto flex flex-wrap justify-center">
                                  <p class="text-xl font-semibold mb-4">Satisfied users of Agricultural services</p>
                                  <!-- Data Loop -->
                                  {% for data in satisfaction_services_data %}
                                  <div class="w-full md:w-1/2 lg:w-1/3 p-4">
                                    <div class="p-6 rounded-lg shadow-lg {{ data.color_class }}">
                                      <!-- District Name -->
                                      <p class="text-white text-center">{{ data.services|safe }}</p>
                                      
                                      <!-- Percentage with Tooltip -->
                                      <p class="text-white text-center relative tooltip pl-6">
                                        {{ data.percentage }}%
                                        <span class="tooltiptext">{{ data.color_description }}</span>
                                      </p>
                                    </div>
                                  </div>
                                {% endfor %}

                                  <!-- Legend -->
                                  <div class="legend-container mt-8 text-center flex">
                                    <p class="legend-item bg-red-500 flex-1 text-center text-white p-4 pt-8">Low Satisfaction</p>
                                    <p class="legend-item bg-yellow-500 flex-2 text-center text-white p-4 pt-8">Medium Satisfaction</p>
                                    <p class="legend-item bg-green-500 flex-1 text-center text-white p-4">High Satisfaction</p>
                                  </div>
                                  <p class="legend-item flex-1 text-end text-black mt-4">Source: Baseline(2023)</p>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="mb-12 md:mb-0 ml-6">
                            <div class="mb-6">
                              <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Awareness of Local Council Budget</h5>
                              <div class="chartBox">
                                <div class="container mx-auto flex flex-wrap justify-center">
                                  <p class="text-xl font-semibold mb-4">% of citizens who are aware of LC budget</p>
                                  <!-- Data Loop -->
                                  {% for data in lc_budget_data %}
                                  <div class="w-full md:w-1/2 lg:w-1/3 p-4">
                                    <div class="p-6 rounded-lg shadow-lg {{ data.color_class }}">
                                      <!-- District Name -->
                                      <p class="text-white text-center">{{ data.districts|safe }}</p>
                                      
                                      <!-- Percentage with Tooltip -->
                                      <p class="text-white text-center relative tooltip pl-6">
                                        {{ data.percentage }}%
                                        <span class="tooltiptext">{{ data.color_description }}</span>
                                      </p>
                                    </div>
                                  </div>
                                {% endfor %}

                                  <!-- Third Row (Bottom Div) -->
                                  <div class="w-full p-4">
                                    <div class="bg-red-500 p-6 rounded-lg shadow-lg">
                                      <p class="text-white text-center">Average of 6 Districts: 8%</p>
                                    </div>
                                  </div>

                                  <!-- Legend -->
                                  <div class="legend-container mt-8 text-center flex">
                                    <p class="legend-item bg-red-500 flex-1 text-center text-white p-4 pt-8">Low Awareness</p>
                                    <p class="legend-item bg-yellow-500 flex-2 text-center text-white p-4 pt-8">Medium Awareness</p>
                                    <p class="legend-item bg-green-500 flex-1 text-center text-white p-4">High Awareness</p>
                                  </div>
                                  <p class="legend-item flex-1 text-end text-black mt-4">Source: Baseline(2023)</p>
                                </div>
                              </div>
                            </div>
                          </div>
                        
                        </div>

                        <div class="grid gap-2 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 lg:gap-12 mt-6">

                          <div class="mb-12 md:mb-0 ml-6">
                            <div class="mb-6">
                              <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Awareness of Local Council Projects</h5>
                              <div class="chartBox">
                                <div class="container mx-auto flex flex-wrap justify-center">
                                  <p class="text-xl font-semibold mb-4">% of citizens who are aware of LC projects</p>
                                  <!-- Data Loop -->
                                  {% for data in lc_budget_data %}
                                  <div class="w-full md:w-1/2 lg:w-1/3 p-4">
                                    <div class="p-6 rounded-lg shadow-lg {{ data.color_class }}">
                                      <!-- District Name -->
                                      <p class="text-white text-center">{{ data.districts|safe }}</p>
                                      
                                      <!-- Percentage with Tooltip -->
                                      <p class="text-white text-center relative tooltip pl-6">
                                        {{ data.percentage }}%
                                        <span class="tooltiptext">{{ data.color_description }}</span>
                                      </p>
                                    </div>
                                  </div>
                                {% endfor %}

                                  <!-- Third Row (Bottom Div) -->
                                  <div class="w-full p-4">
                                    <div class="bg-red-500 p-6 rounded-lg shadow-lg">
                                      <p class="text-white text-center">Average of 6 Districts: 16%</p>
                                    </div>
                                  </div>

                                  <!-- Legend -->
                                  <div class="legend-container mt-8 text-center flex">
                                    <p class="legend-item bg-red-500 flex-1 text-center text-white p-4 pt-8">Low Awareness</p>
                                    <p class="legend-item bg-yellow-500 flex-2 text-center text-white p-4 pt-8">Medium Awareness</p>
                                    <p class="legend-item bg-green-500 flex-1 text-center text-white p-4">High Awareness</p>
                                  </div>
                                  <p class="legend-item flex-1 text-end text-black mt-4">Source: Baseline(2023)</p>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="mb-12 md:mb-0 ml-6">
                            <div class="mb-6">
                              <h5 class="text-2xl font-bold text-center leading-none text-gray-900 pr-1 mb-4">Joint advocacy initiatives with CSOs and LCs</h5>
                              <div class="chartBox">
                                <div class="container mx-auto flex flex-wrap justify-center">
                                  <p class="text-xl font-semibold mb-4">% of CSOs have taken a joint position with LC</p>
                                  <!-- Data Loop -->
                                  {% for data in joint_advocacy_data %}
                                  <div class="w-full md:w-1/2 lg:w-1/3 p-4">
                                    <div class="p-6 rounded-lg shadow-lg {{ data.color_class }}">
                                      <!-- District Name -->
                                      <p class="text-white text-center">{{ data.districts|safe }}</p>
                                      
                                      <!-- Percentage with Tooltip -->
                                      <p class="text-white text-center relative tooltip pl-6">
                                        {{ data.percentage }}%
                                        <span class="tooltiptext">{{ data.color_description }}</span>
                                      </p>
                                    </div>
                                  </div>
                                {% endfor %}

                                <!-- Third Row (Bottom Div) -->
                                <div class="w-full p-4">
                                  <div class="bg-red-500 p-6 rounded-lg shadow-lg">
                                    <p class="text-white text-center">Average of 6 Districts: 55%</p>
                                  </div>
                                </div>

                                  <!-- Legend -->
                                  <div class="legend-container mt-8 text-center flex">
                                    <p class="legend-item bg-red-500 flex-1 text-center text-white p-4 pt-8">Low JA</p>
                                    <p class="legend-item bg-yellow-500 flex-2 text-center text-white p-4 pt-8">Medium JA</p>
                                    <p class="legend-item bg-green-500 flex-1 text-center text-white p-4">High JA</p>
                                  </div>
                                  
                                </div>
                                <p class="legend-item flex-1 text-end text-black mt-4">Source: Baseline(2023)</p>
                              </div>
                            </div>
                          </div>
                        
                        </div>

                              
                      </div>
                    </div>


            </div>

        </div>

    </div>



    <script>
      // setup 
      const data = {
        labels: {{keys_alot_somewhat|safe}},
        datasets: [{
          label: 'Weekly Sales',
          data: [40, 20, 40],
          backgroundColor: [
            '#FF0000',
            '#FFA500',
            '#008000',
          ],
          borderColor: [
            '#FF0000',
            '#FFA500',
            '#008000',
          ],
          borderWidth: 1,
          circumference: 180,
          rotation: 270,
          cutout: '80%',
          needleValue: {{values_alot_somewhat|safe}},
        }]
      };

      const guageNeedle = {
        id: 'guageNeedle',
        afterDatasetsDraw(chart, args, plugins) {
          const {ctx, data} = chart;
          
          ctx.save();
          const xCenter = chart.getDatasetMeta(0).data[0].x;
          const yCenter = chart.getDatasetMeta(0).data[0].y;
          const outerRadius = chart.getDatasetMeta(0).data[0].outerRadius;
          const innerRadius = chart.getDatasetMeta(0).data[0].innerRadius;
          const widthSlice = (outerRadius - innerRadius) / 2;
          const radius = 15;
          const angle = Math.PI / 180;

          const needleValue = data.datasets[0].needleValue;
          const dataTotal = data.datasets[0].data.reduce((a, b) => a + b, 0);
          const circumference = ((chart.getDatasetMeta(0).data[0].circumference / Math.PI) / data.datasets[0].data[0]) * needleValue;

          ctx.translate(xCenter, yCenter);
          ctx.rotate(Math.PI * (circumference + 1.5));

          // needle
          ctx.beginPath();
          ctx.strokeStyle = 'grey';
          ctx.fillStyle = 'grey';
          ctx.lineWidth = 1;
          ctx.moveTo(0 - radius, 0);
          ctx.lineTo(0, 0 - innerRadius - widthSlice);
          ctx.lineTo(0 + radius, 0);
          ctx.closePath();
          ctx.stroke();
          ctx.fill();

          // dot
          ctx.beginPath();
          ctx.arc(0, 0, radius, 0, angle * 360, false);
          ctx.fill();

          ctx.restore();
        }
      }

      // guageFlowMeter plugin block
      const guageFlowMeter = {
        id: "guageFlowMeter",
        afterDatasetsDraw(chart, args, plugins) {
          const {ctx, data} = chart;

          ctx.save();
          const needleValue = data.datasets[0].needleValue;
          const xCenter = chart.getDatasetMeta(0).data[0].x;
          const yCenter = chart.getDatasetMeta(0).data[0].y;
          const circumference = ((chart.getDatasetMeta(0).data[0].circumference / Math.PI) / data.datasets[0].data[0]) * needleValue;
          const percentageValue = circumference * 100;

          // flowMeter
          ctx.font = 'bold 20px sans-serif';
          ctx.fillStyle = 'grey';
          ctx.textAlign = 'center';
          ctx.fillText(`${percentageValue.toFixed(1)}%`, xCenter, yCenter + 50);

        }

      }

      // guageLabels plugin block
      const guageLabels = {
        id: 'guageLabels',
        afterDatasetsDraw(chart, args, plugins) {
          const {ctx, chartArea: {left, right} } = chart;
          const xCenter = chart.getDatasetMeta(0).data[0].x;
          const yCenter = chart.getDatasetMeta(0).data[0].y;
          const outerRadius = chart.getDatasetMeta(0).data[0].outerRadius;
          const innerRadius = chart.getDatasetMeta(0).data[0].innerRadius;
          const widthSlice = (outerRadius - innerRadius) / 2;

          ctx.translate(xCenter, yCenter);
          ctx.font = 'bold 10px sans-serif';
          ctx.fillStyle = 'black';
          ctx.textAlign = 'center';
          ctx.fillText("Don't trust", 0 - innerRadius - widthSlice, 0 + 20);
          ctx.fillText('Trust', 0 + innerRadius + widthSlice, 0 + 20);
          ctx.restore();
        }
      }

      // config 
      const config = {
        type: 'doughnut',
        data,
        options: {
          layout: {
            padding: {
              bottom: 50,
            }
          },
          aspectRatio: 1.8,
          plugins: {
            legend: {
              display: false,
            },
            tooltip: {
              enabled: false,
            }
          }
        },
        plugins: [guageNeedle, guageFlowMeter, guageLabels]
      };

      // render init block
      const ctx = document.getElementById('trustChart').getContext('2d');
      const myChart = new Chart(ctx, config);

    </script>

    <script>
      // setup 
      const infantData = {
        labels: {{ infant_mortality_districts|safe }},
        datasets: [{
          label: 'Percentage change in mortality of under five children by district from 2021 to 2022',
          data: {{ infant_mortality_district_values|safe }},
          backgroundColor: barColor(),
          borderColor: borderColor(),
          borderWidth: 1
        }]
      };

      const lTop = {
        id: 'lTop',
        afterDatasetsDraw(chart, args, plugins) {
          const { ctx, data } = chart;
          ctx.save();
          chart.getDatasetMeta(0).data.forEach((datapoint, index) => {
            ctx.beginPath();
            ctx.strokeStyle = data.datasets[0].borderColor[index];
            ctx.lineWidth = 3;
            const halfWidth = datapoint.width / 2;
            const yPos = datapoint.y - 6;
            const barHeight = Math.abs(datapoint.base - datapoint.y);
      
            // For negative values, adjust the line position to be after the bar
            const lineYPos = data.datasets[0].data[index] < 0 ? yPos + barHeight : yPos;
      

      
            // text
            ctx.font = 'bold 12px sans-serif';
            ctx.fillStyle = data.datasets[0].borderColor[index];
            ctx.textAlign = 'center';
            ctx.fillText(`${data.datasets[0].data[index]}%`, datapoint.x, yPos - 8);
          });
          ctx.restore();
        },
      };
      
  
      // config 
      const config6 = {
        type: 'bar',
        data: infantData,
        options: {
          responsive: true,
          scales: {
            x: {
              position: 'top'
            },
            y: {
              min: -150,
              max: 450,
              beginAtZero: true,
              grace: '30%',
              grid: {
                color: (context) => {
                  const zeroLine = context.tick.value;
                  const gridColor = zeroLine === 0 ? '#666' : '#ccc';
                  return gridColor;
                }
              }
            },
          }
        },
        plugins:[
        {
          legend: {
            labels: {
              generateLabels: function (chart) {
                return chart.data.labels.map(function (label, i) {
                  return {
                    text: '',
                    fillStyle: chart.data.datasets[0].borderColor[i],
                    hidden: false,
                    index: i
                  };
                });
              }
            }
          }
        },
        lTop]
      };
  
      // render init block
      const ctx6 = document.getElementById('underFivebyDistrictChart').getContext('2d');
      const underFivebyDistrictChart = new Chart(ctx6, config6);
  
        function barColor() {
          return (ctx) => {
            const standard = -6;
            const expenses = ctx.raw;
            const color = expenses > standard ? '#FF0000' : expenses <= standard ? '#008000' : black;
            return color;
          }
        }

        function borderColor() {
          return (ctx) => {
            const standard = -6;
            const expenses = ctx.raw;
            const color = expenses > standard ? '#FF0000' : expenses <= standard ? '#008000' : black;
            return color;
          }
        }
     
    </script>

    <script>
      // setup 
      const npseData = {
        labels: {{ npse_districts|safe }},
        datasets: [{
          label: 'Average NPSE aggregrate points by districts 2023',
          data: {{ npse_district_values|safe }},
          backgroundColor: barColor(),
          borderColor: borderColor(),
          borderWidth: 1
        }]
      };

      const line = {
        id: 'line',
        afterDatasetsDraw(chart, args, plugins) {
          const {ctx, data} = chart;
          ctx.save();
          chart.getDatasetMeta(0).data.forEach((datapoint, index) => {
            ctx.beginPath();
            ctx.strokeStyle = data.datasets[0].borderColor[index];
            ctx.lineWidth = 3;
            const halfWidth = datapoint.width / 2;
            ctx.moveTo(datapoint.x - halfWidth, datapoint.y - 6);
            ctx.lineTo(datapoint.x + halfWidth, datapoint.y - 6);
            ctx.stroke();

            // text
            ctx.font = 'bold 12px sans-serif';
            ctx.fillStyle = data.datasets[0].borderColor[index];
            ctx.textAlign = 'center';
            ctx.fillText(data.datasets[0].data[index], datapoint.x, datapoint.y - 15);
          })
        }
      };
      
      

      // config 
      const config7 = {
        type: 'bar',
        data: npseData,
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              grace: '10%',
            }
          }
        },
        plugins:[line]
      };
  
      // render init block
      const ctx7 = document.getElementById('npseChart').getContext('2d');
      const npseChart = new Chart(ctx7, config7);

      function barColor() {
        return (ctx) => {
          const standard = 247;
          const expenses = ctx.raw;
          const color = expenses > standard ? '#00E396' : expenses <= standard ? '#FF4560' : black;
          return color;
        }
      }

      function borderColor() {
        return (ctx) => {
          const standard = 247;
          const expenses = ctx.raw;
          const color = expenses > standard ? '#00E396' : expenses <= standard ? '#FF4560' : black;
          return color;
        }
      }
  
     
    </script>

    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script>
      var options = {
        series: [
        {
          name: 'Feeling safe in the community',
          data: {{ stability_choice_1_district_values|safe }}
        }, 
        {
          name: 'Not feeling safe in the community',
          data: {{ stability_choice_2_district_values|safe }}
        }
        ],
        chart: {
        type: 'bar',
        height: 350,
        stacked: true,
        stackType: '100%'
      },
      plotOptions: {
        bar: {
          horizontal: true,
        },
      },
      colors: ['#00E396', '#FF4560'],
      stroke: {
        width: 1,
        colors: ['#fff']
      },
      xaxis: {
        categories: {{ stability_districts|safe }},
      },
      tooltip: {
        y: {
          formatter: function (val) {
            return val + "%"
          }
        }
      },
      fill: {
        opacity: 1
      
      },
      legend: {
        position: 'top',
        horizontalAlign: 'left',
        offsetX: 40
      }
      };

      var chart = new ApexCharts(document.querySelector("#chart"), options);
      chart.render();
    </script>

    <script>
      var options = {
        series: [{
        name: 'Budget Allocation',
        data: [1.23, 1.36, 0.56]
      }],
        chart: {
        height: 350,
        type: 'bar',
      },
      plotOptions: {
        bar: {
          borderRadius: 10,
          dataLabels: {
            position: 'top', // top, center, bottom
          },
        }
      },
      dataLabels: {
        enabled: true,
        formatter: function (val) {
          return val + "%";
        },
        offsetY: -20,
        style: {
          fontSize: '12px',
          colors: ["#304758"]
        }
      },
      
      xaxis: {
        categories: ["2020", "2021", "2022"],
        position: 'top',
        axisBorder: {
          show: false
        },
        axisTicks: {
          show: false
        },
        crosshairs: {
          fill: {
            type: 'gradient',
            gradient: {
              colorFrom: '#D8E3F0',
              colorTo: '#BED1E6',
              stops: [0, 100],
              opacityFrom: 0.4,
              opacityTo: 0.5,
            }
          }
        },
        tooltip: {
          enabled: true,
        }
      },
      yaxis: {
        axisBorder: {
          show: false
        },
        axisTicks: {
          show: false,
        },
        labels: {
          show: false,
          formatter: function (val) {
            return val + "%";
          }
        },
        
      
      },
      title: {
        text: '% of budget allocation to local councils%',
        floating: true,
        offsetY: 330,
        align: 'center',
        style: {
          color: '#444'
        }
      }
      };

      var chart = new ApexCharts(document.querySelector("#budgetDevolvedChart"), options);
      chart.render();
    </script>

    <script>
      var options = {
        series: [
          { name: 'Q1', data: [3, 3] },
          { name: 'Q2', data: [0, 0] },
          { name: 'Q3', data: [5, 0] },
          { name: 'Q4', data: [2, 0] },
        ],
        chart: {
          type: 'bar',
          height: 350,
        },
        plotOptions: {
          bar: {
            horizontal: false,
            columnWidth: '55%',
            endingShape: 'rounded',
            dataLabels: {
              position: 'top',
            },
          },
        },
        dataLabels: {
          enabled: true,
          formatter: function (val) {
            return val;
          },
          offsetY: -20,
          style: {
            fontSize: '12px',
            colors: ["#000000"],
          },
        },
        stroke: {
          show: true,
          width: 2,
          colors: ['transparent'],
        },
        xaxis: {
          categories: ['2021', '2022'],
        },
        yaxis: {
          title: {
            text: '',
          },
        },
        fill: {
          colors: ['#F44336', '#E91E63', '#9C27B0'],
        },
        tooltip: {
          y: {
            formatter: function (val) {
              return val;
            },
          },
        },
      };
    
      var chart = new ApexCharts(document.querySelector("#transferChart"), options);
      chart.render();
    </script>
    

    <script>
      var options = {
        series: [{
        name: 'Cash Flow',
        data: {{ infant_mortality_district_values|safe }}
      }],
        chart: {
        type: 'bar',
        height: 350
      },
      plotOptions: {
        bar: {
          colors: {
            ranges: [{
              from: -6,
              to: -100,
              color: '#FF0000'
            }, {
              from: -5,
              to: 500,
              color: '#FF4560'
            }]
          },
          columnWidth: '80%',
        }
      },
      dataLabels: {
        enabled: true,
        formatter: function (val) {
          return val.toFixed(0) + "%";
        },
        style: {
          colors: ['#000000']  // Change this to the desired color for data labels
        }
      },
      yaxis: {
        title: {
          text: '% change in mortality of under 5 children',
        },
        labels: {
          formatter: function (y) {
            return y.toFixed(0) + "%";
          }
        }
      },
      xaxis: {
        categories: {{ infant_mortality_districts|safe }},
        labels: {
          rotate: -90
        }
      }
      };

      var chart = new ApexCharts(document.querySelector("#newChart"), options);
      chart.render();
    </script>
    <!--Budget Allocation-->
    <script>
      // setup 
      const bugetData = {
        labels: {{keys_alot_somewhat|safe}},
        datasets: [{
          label: 'Weekly Sales',
          data: [30, 20, 50],
          backgroundColor: [
            '#FF0000',
            '#FFA500',
            '#008000',
          ],
          borderColor: [
            '#FF0000',
            '#FFA500',
            '#008000',
          ],
          borderWidth: 1,
          circumference: 180,
          rotation: 270,
          cutout: '80%',
          needleValue: {{avg_budget_2022|safe}},
        }]
      };

      const guageNeedle1 = {
        id: 'guageNeedle1',
        afterDatasetsDraw(chart, args, plugins) {
          const {ctx, data} = chart;
          
          ctx.save();
          const xCenter = chart.getDatasetMeta(0).data[0].x;
          const yCenter = chart.getDatasetMeta(0).data[0].y;
          const outerRadius = chart.getDatasetMeta(0).data[0].outerRadius;
          const innerRadius = chart.getDatasetMeta(0).data[0].innerRadius;
          const widthSlice = (outerRadius - innerRadius) / 2;
          const radius = 15;
          const angle = Math.PI / 180;

          const needleValue = data.datasets[0].needleValue;
          const dataTotal = data.datasets[0].data.reduce((a, b) => a + b, 0);
          const circumference = ((chart.getDatasetMeta(0).data[0].circumference / Math.PI) / data.datasets[0].data[0]) * needleValue;

          ctx.translate(xCenter, yCenter);
          ctx.rotate(Math.PI * (circumference + 1.5));

          // needle
          ctx.beginPath();
          ctx.strokeStyle = 'grey';
          ctx.fillStyle = 'grey';
          ctx.lineWidth = 1;
          ctx.moveTo(0 - radius, 0);
          ctx.lineTo(0, 0 - innerRadius - widthSlice);
          ctx.lineTo(0 + radius, 0);
          ctx.closePath();
          ctx.stroke();
          ctx.fill();

          // dot
          ctx.beginPath();
          ctx.arc(0, 0, radius, 0, angle * 360, false);
          ctx.fill();

          ctx.restore();
        }
      }

      // guageFlowMeter plugin block
      const guageFlowMeter1 = {
        id: "guageFlowMeter1",
        afterDatasetsDraw(chart, args, plugins) {
          const {ctx, data} = chart;

          ctx.save();
          const needleValue = data.datasets[0].needleValue;
          const xCenter = chart.getDatasetMeta(0).data[0].x;
          const yCenter = chart.getDatasetMeta(0).data[0].y;
          const circumference = ((chart.getDatasetMeta(0).data[0].circumference / Math.PI) / data.datasets[0].data[0]) * needleValue;
          const percentageValue = circumference * 100;

          // flowMeter
          ctx.font = 'bold 20px sans-serif';
          ctx.fillStyle = 'grey';
          ctx.textAlign = 'center';
          ctx.fillText(`${percentageValue.toFixed(1)}%`, xCenter, yCenter + 50);

        }

      }

      // guageLabels plugin block
      const guageLabels1 = {
        id: 'guageLabels1',
        afterDatasetsDraw(chart, args, plugins) {
          const {ctx, chartArea: {left, right} } = chart;
          const xCenter = chart.getDatasetMeta(0).data[0].x;
          const yCenter = chart.getDatasetMeta(0).data[0].y;
          const outerRadius = chart.getDatasetMeta(0).data[0].outerRadius;
          const innerRadius = chart.getDatasetMeta(0).data[0].innerRadius;
          const widthSlice = (outerRadius - innerRadius) / 2;

          ctx.translate(xCenter, yCenter);
          ctx.font = 'bold 10px sans-serif';
          ctx.fillStyle = 'black';
          ctx.textAlign = 'center';
          ctx.fillText("Don't trust", 0 - innerRadius - widthSlice, 0 + 20);
          ctx.fillText('Trust', 0 + innerRadius + widthSlice, 0 + 20);
          ctx.restore();
        }
      }

      // config 
      const config10 = {
        type: 'doughnut',
        bugetData,
        options: {
          layout: {
            padding: {
              bottom: 50,
            }
          },
          aspectRatio: 1.8,
          plugins: {
            legend: {
              display: false,
            },
            tooltip: {
              enabled: false,
            }
          }
        },
        plugins: [guageNeedle1, guageFlowMeter1, guageLabels1]
      };

      // render init block
      const ctx10 = document.getElementById('budgetChart').getContext('2d');
      const budgetChart = new Chart(ctx10, config10);

    </script>

    <script>
      const ctx = document.getElementById('areaLineChart');

      new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
          datasets: [{
            label: 'A lot',
            data: {{ a_lot|safe }},
            backgroundColor: 'rgba(75, 192, 192, 0.2)', // Area fill color
            borderColor: 'rgba(75, 192, 192, 1)', // Line color
            borderWidth: 2,
            pointRadius: 5, // Size of data points
            pointBackgroundColor: 'rgba(75, 192, 192, 1)', // Color of data points
            pointBorderColor: '#fff', // Border color of data points
            pointHoverRadius: 8, // Size of data points on hover
            pointHoverBackgroundColor: '#fff', // Background color of data points on hover
            pointHoverBorderColor: 'rgba(75, 192, 192, 1)', // Border color of data points on hover
            fill: true, // Enable area fill
        },
        {
          label: 'Monthly Sales',
          data: [20, 28, 10, 32, 25],
          backgroundColor: 'rgba(75, 192, 192, 0.2)', // Area fill color
          borderColor: 'rgba(75, 192, 192, 1)', // Line color
          borderWidth: 2,
          pointRadius: 5, // Size of data points
          pointBackgroundColor: 'rgba(75, 192, 192, 1)', // Color of data points
          pointBorderColor: '#fff', // Border color of data points
          pointHoverRadius: 8, // Size of data points on hover
          pointHoverBackgroundColor: '#fff', // Background color of data points on hover
          pointHoverBorderColor: 'rgba(75, 192, 192, 1)', // Border color of data points on hover
          fill: true, // Enable area fill
      },
      {
        label: 'Monthly Sales',
        data: [30, 38, 20, 42, 35],
        backgroundColor: 'rgba(75, 192, 192, 0.2)', // Area fill color
        borderColor: 'rgba(75, 192, 192, 1)', // Line color
        borderWidth: 2,
        pointRadius: 5, // Size of data points
        pointBackgroundColor: 'rgba(75, 192, 192, 1)', // Color of data points
        pointBorderColor: '#fff', // Border color of data points
        pointHoverRadius: 8, // Size of data points on hover
        pointHoverBackgroundColor: '#fff', // Background color of data points on hover
        pointHoverBorderColor: 'rgba(75, 192, 192, 1)', // Border color of data points on hover
        fill: true, // Enable area fill
    }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });

    </script>

    <script>
      var d = {
        labels: ["Year 1 - Q1", "Year 1 - Q2", "Year 1 - Q3", "Year 1 - Q4", "Year 2 - Q1", "Year 2 - Q2", "Year 2 - Q3", "Year 2 - Q4"],
        datasets: [
          {
            label: "Data",
            backgroundColor: ["", "", "", "", "", "", "", ""], // Initialize as empty strings
            borderColor: ["", "", "", "", "", "", "", ""], // Initialize as empty strings
            borderWidth: 1,
            data: [3, 0, 5, 2, 3, 0, 0, 0],
          },
        ],
      };
    
      // Update colors based on conditions
      data.datasets[0].backgroundColor = data.datasets[0].data.map(value => {
        if (value >= 4) {
          return 'rgba(255, 0, 0, 0.2)'; // Red for values 4 and above
        } else if (value >= 2) {
          return 'rgba(255, 255, 0, 0.2)'; // Yellow for values between 2 and 3
        } else {
          return 'rgba(255, 0, 0, 0.2)'; // Red for values between 0 and 2
        }
      });
    
      data.datasets[0].borderColor = data.datasets[0].data.map(value => {
        if (value >= 4) {
          return 'rgba(255, 0, 0, 1)';
        } else if (value >= 2) {
          return 'rgba(255, 255, 0, 1)';
        } else {
          return 'rgba(255, 0, 0, 1)';
        }
      });
    
      var options = {
        scales: {
          x: {
            stacked: false,
          },
          y: {
            stacked: false,
          },
        },
        plugins: {
          legend: {
            display: true,
          },
          datalabels: {
            anchor: 'end',
            align: 'end',
            offset: 4,
            formatter: function(value, context) {
              return value;
            },
          },
        },
      };
    
      var ctx30 = document.getElementById("transferChart").getContext("2d");
    
      var transfer = new Chart(ctx30, {
        type: "bar",
        data: d,
        options: options,
      });
    </script>
    


{% endblock content %}


