{% extends "_base.html" %}



{% block content %}

<!-- Include the Chart.js library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Render the chart -->
<canvas id="myChart"></canvas>

<script>
    // Prepare data for Chart.js
    var answerChoices = {{ answer_choices|safe }};
    var dates = {{ dates|safe }};
    var dataByAnswerChoice = {{ data_by_answer_choice|safe }};

    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: dates,
            datasets: answerChoices.map(function(choice, index) {
                return {
                    label: choice,
                    data: dataByAnswerChoice[choice],
                    borderColor: 'rgba(75, 192, 192, 1)',
                    fill: false,
                    tension: 0.2
                };
            })
        },
        options: {
            scales: {
                x: {
                    type: 'time',
                    time: {
                        unit: 'day',
                        displayFormats: {
                            day: 'MMM D'
                        }
                    }
                },
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>



{% endblock content %}



